{"ast":null,"code":"import _slicedToArray from \"/home/pot/project/shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/pot/project/shop/frontend/src/screens/pnl.js\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCloudUploadAlt, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Button, Dropdown } from '@themesberg/react-bootstrap';\nimport React, { useState } from 'react';\nimport { Toast } from '@themesberg/react-bootstrap';\nimport { faBootstrap } from '@fortawesome/free-brands-svg-icons';\nimport Progress from \"../components/progress/progress\";\nimport { Form } from '@themesberg/react-bootstrap';\nimport { Alert } from '@themesberg/react-bootstrap';\nimport UploadService from '../services/upload';\nimport Moment from 'moment';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nexport default (function () {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      showDefault = _useState2[0],\n      setShowDefault = _useState2[1];\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fileObject = _useState4[0],\n      setFileObject = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      verifyPassword = _useState8[0],\n      setVerifyPassword = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sheetName = _useState10[0],\n      setSheetName = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      showAlert = _useState12[0],\n      setShowAlert = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      alertStatus = _useState14[0],\n      setAlertStatus = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      alertDescription = _useState16[0],\n      setAlertDescription = _useState16[1];\n\n  var _useState17 = useState(0),\n      _useState18 = _slicedToArray(_useState17, 2),\n      progress = _useState18[0],\n      setProgress = _useState18[1];\n\n  var nowTime = Moment(Date.now()).format('YYYY-MM-DD');\n\n  var _useState19 = useState(new Date()),\n      _useState20 = _slicedToArray(_useState19, 2),\n      startDate = _useState20[0],\n      setStartDate = _useState20[1];\n\n  function handleCloseDefault() {\n    setShowDefault(false);\n  }\n\n  function onChangeInput(e) {\n    e.preventDefault();\n    var file = e.target.files[0];\n\n    if (file.type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" || file.type === \"application/vnd.ms-excel\") {\n      setShowAlert(false);\n      setFileObject(file);\n    } else {\n      setShowAlert(true);\n      setAlertStatus(\"danger\");\n      setAlertDescription(\"Just support for .xlsx and .xls!\");\n    }\n  }\n\n  function uploadFile() {\n    if (fileObject === undefined || password === \"\" || verifyPassword === \"\" || sheetName === \"\") {\n      setShowAlert(true);\n      setAlertStatus(\"danger\");\n      setAlertDescription(\"missing field!\");\n    } else if (password !== verifyPassword) {\n      setShowAlert(true);\n      setAlertStatus(\"danger\");\n      setAlertDescription(\"pass not match!\");\n    } else {\n      var month = parseInt((\"0\" + (startDate.getUTCMonth() + 1)).slice(-2));\n      console.log(month);\n      var year = parseInt(startDate.getUTCFullYear());\n      setProgress(0);\n      UploadService.uploadNas(fileObject, password, sheetName, month, year, function (event) {}).then(function (response) {\n        if (response.status === 200) {\n          setProgress(100);\n          setShowAlert(true);\n          setAlertStatus(\"success\");\n          setAlertDescription(\"completed!\");\n          setFileObject(undefined);\n          setPassword(\"\");\n          setVerifyPassword(\"\");\n          setSheetName(\"\");\n        } else {\n          setShowAlert(true);\n          setProgress(0);\n          setAlertStatus(\"danger\");\n          setAlertDescription(response.statusText);\n        }\n      }).catch(function () {\n        setShowAlert(true);\n        setProgress(0);\n        setAlertStatus(\"danger\");\n        setAlertDescription(\"error\");\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    className: \"btn-toolbar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n    as: Button,\n    variant: \"primary\",\n    size: \"sm\",\n    className: \"me-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPlus,\n    className: \"me-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }), \"New Task\"), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    className: \"dashboard-dropdown dropdown-menu-left mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n    className: \"fw-bold\",\n    onClick: function onClick() {\n      return setShowDefault(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCloudUploadAlt,\n    className: \"me-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), \" Upload Files\"), /*#__PURE__*/React.createElement(Dropdown.Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    m: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toast, {\n    show: showDefault,\n    onClose: handleCloseDefault,\n    className: \"my-3 width-700\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Toast.Header, {\n    className: \"text-primary\",\n    closeButton: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faBootstrap,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"me-auto ms-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, \"Upload Pnl\"), /*#__PURE__*/React.createElement(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, nowTime), /*#__PURE__*/React.createElement(Button, {\n    variant: \"close\",\n    size: \"xs\",\n    onClick: handleCloseDefault,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Toast.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, showAlert === true ? /*#__PURE__*/React.createElement(Alert, {\n    variant: alertStatus,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, alertDescription) : \"\", /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, \"Select File\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"file\",\n    onChange: function onChange(e) {\n      return onChangeInput(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, \"Sheet Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"input\",\n    onChange: function onChange(e) {\n      return setSheetName(e.target.value);\n    },\n    value: sheetName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    value: password,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, \"Password Again\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    onChange: function onChange(e) {\n      return setVerifyPassword(e.target.value);\n    },\n    value: verifyPassword,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, \"Select Month\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myContainter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    className: \"myDatePicker\",\n    selected: startDate,\n    onChange: function onChange(date) {\n      return setStartDate(date);\n    },\n    dateFormat: \"MM/yyyy\",\n    showMonthYearPicker: true,\n    fixedHeight: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    className: \"m-1 width-200\",\n    onClick: uploadFile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, \"Upload\")), /*#__PURE__*/React.createElement(Progress, {\n    variant: \"primary\",\n    label: \"\",\n    value: progress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  })))))));\n});","map":{"version":3,"sources":["/home/pot/project/shop/frontend/src/screens/pnl.js"],"names":["FontAwesomeIcon","faCloudUploadAlt","faPlus","Col","Row","Button","Dropdown","React","useState","Toast","faBootstrap","Progress","Form","Alert","UploadService","Moment","DatePicker","showDefault","setShowDefault","undefined","fileObject","setFileObject","password","setPassword","verifyPassword","setVerifyPassword","sheetName","setSheetName","showAlert","setShowAlert","alertStatus","setAlertStatus","alertDescription","setAlertDescription","progress","setProgress","nowTime","Date","now","format","startDate","setStartDate","handleCloseDefault","onChangeInput","e","preventDefault","file","target","files","type","uploadFile","month","parseInt","getUTCMonth","slice","console","log","year","getUTCFullYear","uploadNas","event","then","response","status","statusText","catch","value","date"],"mappings":"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","sourcesContent":["\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCloudUploadAlt, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Button, Dropdown } from '@themesberg/react-bootstrap';\n\nimport React, { useState } from 'react';\nimport { Toast } from '@themesberg/react-bootstrap';\nimport { faBootstrap } from '@fortawesome/free-brands-svg-icons';\nimport Progress from \"../components/progress/progress\";\nimport { Form } from '@themesberg/react-bootstrap';\nimport { Alert } from '@themesberg/react-bootstrap';\nimport  UploadService from '../services/upload' \nimport Moment from 'moment';\nimport DatePicker from 'react-datepicker'\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nexport default () => {\n\n  const [showDefault, setShowDefault] = useState(true);\n  const [fileObject, setFileObject] = useState(undefined);\n  const [password, setPassword] = useState(\"\");\n  const [verifyPassword, setVerifyPassword] = useState(\"\");\n  const [sheetName, setSheetName] = useState(\"\");\n  const [showAlert, setShowAlert] = useState(false) \n  const [alertStatus, setAlertStatus] = useState(\"\")\n  const [alertDescription, setAlertDescription] = useState(\"\")\n  const [progress, setProgress] = useState(0);\n  const nowTime = Moment(Date.now()).format('YYYY-MM-DD')\n\n\n  const [startDate, setStartDate] = useState(new Date());\n\n\n  function handleCloseDefault(){\n    setShowDefault(false)\n  }\n\n  function onChangeInput(e){\n    e.preventDefault();\n    var file = e.target.files[0]\n    if ((file.type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\") || (file.type === \"application/vnd.ms-excel\")) {\n      setShowAlert(false)\n      setFileObject(file)\n    }\n    else{\n      setShowAlert(true)\n      setAlertStatus(\"danger\")\n      setAlertDescription(\"Just support for .xlsx and .xls!\")\n    }\n  }\n\n  function uploadFile(){\n  \n    if (fileObject === undefined || password === \"\" || verifyPassword === \"\" || sheetName === \"\"){\n      setShowAlert(true)\n      setAlertStatus(\"danger\")\n      setAlertDescription(\"missing field!\")\n\n    }\n    else if (password !== verifyPassword){\n      setShowAlert(true)\n      setAlertStatus(\"danger\")\n      setAlertDescription(\"pass not match!\")\n    }\n    else {\n      let month = parseInt((\"0\" + (startDate.getUTCMonth() + 1)).slice(-2))\n      console.log(month)\n      let year = parseInt(startDate.getUTCFullYear())\n      setProgress(0);\n      UploadService.uploadNas(fileObject, password, sheetName, month, year, (event) => {\n      })\n        .then((response) => {\n          if (response.status === 200) {\n            setProgress(100)\n            setShowAlert(true)\n            setAlertStatus(\"success\")\n            setAlertDescription(\"completed!\")\n            setFileObject(undefined)\n            setPassword(\"\")\n            setVerifyPassword(\"\")\n            setSheetName(\"\")\n\n          }\n          else {\n            setShowAlert(true)\n            setProgress(0)\n            setAlertStatus(\"danger\")\n            setAlertDescription(response.statusText)\n          }\n        })\n        .catch(() => {\n          setShowAlert(true)\n          setProgress(0);\n          setAlertStatus(\"danger\")\n          setAlertDescription(\"error\")\n        });\n    }\n  }\n\nreturn (\n\n  <>\n    \n    <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\">\n      <Dropdown className=\"btn-toolbar\">\n        <Dropdown.Toggle as={Button} variant=\"primary\" size=\"sm\" className=\"me-2\">\n          <FontAwesomeIcon icon={faPlus} className=\"me-2\" />New Task\n        </Dropdown.Toggle>\n        <Dropdown.Menu className=\"dashboard-dropdown dropdown-menu-left mt-2\">\n          <Dropdown.Item className=\"fw-bold\" onClick={() => setShowDefault(true)}>\n            <FontAwesomeIcon icon={faCloudUploadAlt} className=\"me-2\"/> Upload Files\n          </Dropdown.Item>\n          <Dropdown.Divider />\n        </Dropdown.Menu>\n      </Dropdown>\n\n      </div>\n      <div>\n       <Row className=\"justify-content-md-center\">\n        <Col xs = {12} m={6}  xl={4} className=\"mb-4\">\n          <Toast show={showDefault} onClose={handleCloseDefault} className=\"my-3 width-700\">\n              <Toast.Header className=\"text-primary\" closeButton={false}>\n                  <FontAwesomeIcon icon={faBootstrap} />\n                  <strong className=\"me-auto ms-2\">Upload Pnl</strong>\n                  <small>{nowTime}</small>\n                  <Button variant=\"close\" size=\"xs\" onClick={handleCloseDefault} />\n              </Toast.Header>\n              <Toast.Body>\n                <Form>\n                  {showAlert === true ? \n                    <Alert variant={alertStatus}>\n                      {alertDescription}\n                    </Alert> : \"\"\n                  }\n                  <Form.Group className=\"mb-3\">\n                    <Form.Label>Select File</Form.Label>\n                    <Form.Control type=\"file\" onChange={(e) => onChangeInput(e)}/>\n                  </Form.Group> \n                  <Form.Group className=\"mb-3\">\n                    <Form.Label>Sheet Name</Form.Label>\n                    <Form.Control type=\"input\"  onChange={(e) => setSheetName(e.target.value)} value={sheetName}/>\n                  </Form.Group> \n                  <Form.Group className=\"mb-3\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control type=\"password\"  onChange={(e) => setPassword(e.target.value)} value={password}/>\n                  </Form.Group> \n                  <Form.Group className=\"mb-3\">\n                  <Form.Label>Password Again</Form.Label>\n                    <Form.Control type=\"password\" onChange={(e) => setVerifyPassword(e.target.value)} value={verifyPassword}/>\n                  </Form.Group>\n                  <Form.Group className=\"mb-3\">\n                    <Form.Label>Select Month</Form.Label>\n                    <div  className=\"myContainter\" >\n                    <DatePicker  className=\"myDatePicker\"\n                          selected={startDate}\n                          onChange={(date) => setStartDate(date)}\n                          dateFormat=\"MM/yyyy\"\n                          showMonthYearPicker\n                          fixedHeight\n                      />\n                  </div> \n                  </Form.Group>\n                  <Button variant=\"secondary\" className=\"m-1 width-200\" onClick={uploadFile}>Upload</Button>\n                  \n                </Form>\n                \n                <Progress variant=\"primary\" label=\"\" value={progress} />\n              </Toast.Body>\n          </Toast>\n        </Col>\n      </Row>\n      </div>\n\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}