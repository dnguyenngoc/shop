{"ast":null,"code":"import _regeneratorRuntime from \"/home/pot/project/shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/pot/project/shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nvar API_V1 = \"http://10.1.133.3:8081/api/v1/\";\nexport default function loginAccessToken(_x, _x2, _x3, _x4) {\n  return _loginAccessToken.apply(this, arguments);\n}\n\nfunction _loginAccessToken() {\n  _loginAccessToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(username, password, isRemember, path) {\n    var bodyFormData, isLogin;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            bodyFormData = new FormData();\n            bodyFormData.append('username', username);\n            bodyFormData.append('password', password);\n            isLogin = false;\n            _context.next = 6;\n            return axios({\n              method: \"post\",\n              url: API_V1 + \"account/login/access-token\",\n              data: bodyFormData,\n              headers: {\n                \"Content-Type\": \"multipart/form-data\"\n              }\n            }).then(function (response) {\n              if (response.status === 200) {\n                var data = response.data;\n\n                if (isRemember === true) {\n                  console.log(\"save token\");\n                  localStorage.setItem('isRemember', isRemember);\n                  localStorage.setItem('tokenType', data.token_type);\n                  localStorage.setItem('accessToken', data.access_token);\n                  localStorage.setItem('freshToken', data.refresh_token);\n                  localStorage.setItem('expireAccessToken', data.expire_token);\n                  localStorage.setItem('expireFreshToken', data.expire_refresh_token);\n                  window.location.href = path;\n                }\n\n                isLogin = true;\n              } else if (response.status === 400 || response.status === 404) {\n                console.log(\"wrong email or password\");\n              }\n            }).catch(function (response) {\n              console.log(response);\n            });\n\n          case 6:\n            return _context.abrupt(\"return\", isLogin);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loginAccessToken.apply(this, arguments);\n}","map":{"version":3,"sources":["/home/pot/project/shop/frontend/src/services/account.js"],"names":["axios","API_V1","loginAccessToken","username","password","isRemember","path","bodyFormData","FormData","append","isLogin","method","url","data","headers","then","response","status","console","log","localStorage","setItem","token_type","access_token","refresh_token","expire_token","expire_refresh_token","window","location","href","catch"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,MAAM,GAAG,gCAAf;AAEA,wBAA8BC,gBAA9B;AAAA;AAAA;;;+EAAe,iBAAgCC,QAAhC,EAA0CC,QAA1C,EAAoDC,UAApD,EAAgEC,IAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,YAAAA,YADS,GACM,IAAIC,QAAJ,EADN;AAEbD,YAAAA,YAAY,CAACE,MAAb,CAAoB,UAApB,EAAgCN,QAAhC;AACAI,YAAAA,YAAY,CAACE,MAAb,CAAoB,UAApB,EAAgCL,QAAhC;AACIM,YAAAA,OAJS,GAIC,KAJD;AAAA;AAAA,mBAMPV,KAAK,CAAC;AACVW,cAAAA,MAAM,EAAE,MADE;AAEVC,cAAAA,GAAG,EAAEX,MAAM,GAAG,4BAFJ;AAGVY,cAAAA,IAAI,EAAEN,YAHI;AAIVO,cAAAA,OAAO,EAAE;AAAE,gCAAgB;AAAlB;AAJC,aAAD,CAAL,CAMHC,IANG,CAME,UAAUC,QAAV,EAAoB;AACxB,kBAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA4B;AAC1B,oBAAMJ,IAAI,GAAGG,QAAQ,CAACH,IAAtB;;AACA,oBAAIR,UAAU,KAAK,IAAnB,EAAyB;AACvBa,kBAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmChB,UAAnC;AACAe,kBAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCR,IAAI,CAACS,UAAvC;AACAF,kBAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCR,IAAI,CAACU,YAAzC;AACAH,kBAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCR,IAAI,CAACW,aAAxC;AACAJ,kBAAAA,YAAY,CAACC,OAAb,CAAqB,mBAArB,EAA0CR,IAAI,CAACY,YAA/C;AACAL,kBAAAA,YAAY,CAACC,OAAb,CAAqB,kBAArB,EAAyCR,IAAI,CAACa,oBAA9C;AACAC,kBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBvB,IAAvB;AACD;;AACDI,gBAAAA,OAAO,GAAG,IAAV;AACD,eAbD,MAaM,IAAIM,QAAQ,CAACC,MAAT,KAAoB,GAApB,IAA2BD,QAAQ,CAACC,MAAT,KAAoB,GAAnD,EAAwD;AAC5DC,gBAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AACF,aAvBG,EAwBHW,KAxBG,CAwBG,UAAUd,QAAV,EAAoB;AACzBE,cAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACD,aA1BG,CANO;;AAAA;AAAA,6CAiCNN,OAjCM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import axios from 'axios';\n\nconst API_V1 = \"http://10.1.133.3:8081/api/v1/\"\n\nexport default async function loginAccessToken(username, password, isRemember, path) {\n  var bodyFormData = new FormData();\n  bodyFormData.append('username', username);\n  bodyFormData.append('password', password);\n  let isLogin = false;\n\n  await axios({\n    method: \"post\",\n    url: API_V1 + \"account/login/access-token\",\n    data: bodyFormData,\n    headers: { \"Content-Type\": \"multipart/form-data\" },\n  })\n    .then(function (response) {\n      if (response.status === 200){\n        const data = response.data\n        if (isRemember === true) {\n          console.log(\"save token\")\n          localStorage.setItem('isRemember', isRemember)\n          localStorage.setItem('tokenType', data.token_type)\n          localStorage.setItem('accessToken', data.access_token)        \n          localStorage.setItem('freshToken', data.refresh_token)   \n          localStorage.setItem('expireAccessToken', data.expire_token)   \n          localStorage.setItem('expireFreshToken', data.expire_refresh_token)\n          window.location.href = path   \n        }\n        isLogin = true     \n      }else if (response.status === 400 || response.status === 404) {\n        console.log(\"wrong email or password\")\n      }\n    })\n    .catch(function (response) {\n      console.log(response);\n    });\n  return isLogin\n  \n}\n"]},"metadata":{},"sourceType":"module"}